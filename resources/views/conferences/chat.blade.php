<div class="container p-0 mb-3">
    <div class="row g-0">
        <div class="col-12 col-lg-5 col-xl-3 chatHeight border-right">

            <div class="px-4 d-none d-md-block">
                <div class="d-flex align-items-center">
                    <div class="flex-grow-1">
                        <input type="text" class="form-control my-3" placeholder="Pesquisar..">
                    </div>
                </div>
            </div>

            {{-- <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="badge bg-success float-right">5</div>
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar5.png" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Vanessa Tucker
                        <div class="small"><span class="fas fa-circle chat-online"></span> Online</div>
                    </div>
                </div>
            </a>
            <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="badge bg-success float-right">2</div>
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar2.png" class="rounded-circle mr-1" alt="William Harris" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        William Harris
                        <div class="small"><span class="fas fa-circle chat-online"></span> Online</div>
                    </div>
                </div>
            </a> --}}

            <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                        alt="Sharon Lessman" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Maria Isa
                        <div class="small"><span class="fas fa-circle chat-online"></span>
                            Online
                        </div>
                    </div>
                </div>
            </a>

            {{-- <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar4.png" class="rounded-circle mr-1" alt="Christina Mason" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Christina Mason
                        <div class="small"><span class="fas fa-circle chat-offline"></span> Offline</div>
                    </div>
                </div>
            </a> --}}

            {{-- <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar5.png" class="rounded-circle mr-1" alt="Fiona Green" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Fiona Green
                        <div class="small"><span class="fas fa-circle chat-offline"></span> Offline</div>
                    </div>
                </div>
            </a> 
            
            <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar2.png" class="rounded-circle mr-1" alt="Doris Wilder" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Doris Wilder
                        <div class="small"><span class="fas fa-circle chat-offline"></span> Offline</div>
                    </div>
                </div>
            </a>
            <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar4.png" class="rounded-circle mr-1" alt="Haley Kennedy" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Haley Kennedy
                        <div class="small"><span class="fas fa-circle chat-offline"></span> Offline</div>
                    </div>
                </div>
            </a>
            
            <a href="#" class="list-group-item list-group-item-action border-0">
                <div class="d-flex align-items-start">
                    <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1" alt="Jennifer Chang" width="40" height="40">
                    <div class="flex-grow-1 ml-3">
                        Jennifer Chang
                        <div class="small"><span class="fas fa-circle chat-offline"></span> Offline</div>
                    </div>
                </div>
            </a> --}}

            <hr class="d-block d-lg-none mt-1 mb-0">
        </div>
        <div class="col-12 col-lg-7 col-xl-9">
            <div class="py-2 px-4 border-bottom d-none d-lg-block">
                <div class="d-flex align-items-center py-1">
                    <div class="position-relative">
                        <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                            alt="Sharon Lessman" width="40" height="40">
                    </div>
                    <div class="flex-grow-1 pl-3">
                        <strong>Maria Isa</strong>
                        <div class="text-muted small"><em>Digitando..</em></div>
                    </div>
                    <div>
                        <button class="btn btn-primary btn-lg mr-1 px-3">
                            <span class="fas fa-phone-alt"></span>
                        </button>
                        <button id="conf" class="btn btn-info btn-lg mr-1 px-3 d-none d-md-inline-block">
                            <span class="fas fa-video"></span>
                        </button>
                        <button class="btn btn-light border btn-lg px-3">
                            <span class="fas fa-ellipsis-h"></span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="position-relative">
                <div class="chat-messages p-4">

                    <div class="chat-message-right pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" 
                            class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:33 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                        </div> --}}
                    </div>

                    <div class="chat-message-left pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" 
                            class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:34 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            Sit meis deleniti eu, pri vidit meliore docendi ut, an eum erat animal commodo.
                        </div> --}}
                    </div>

                    <div class="chat-message-right mb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:35 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Cum ea graeci tractatos.
                        </div> --}}
                    </div>

                    <div class="chat-message-left pb-4">
                        <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                                alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:36 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            <div id="chat-container">
                                <div id="file-container"></div>
                                <div class="chat-output">
                                    <p>Hello</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-message-left pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:37 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            Cras pulvinar, sapien id vehicula aliquet, diam velit elementum orci.
                        </div> --}}
                    </div>

                    <div class="chat-message-right mb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:38 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                        </div> --}}
                    </div>

                    <div class="chat-message-left pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:39 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            Sit meis deleniti eu, pri vidit meliore docendi ut, an eum erat animal commodo.
                        </div> --}}
                    </div>

                    <div class="chat-message-right mb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:40 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Cum ea graeci tractatos.
                        </div> --}}
                    </div>

                    <div class="chat-message-right mb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:41 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Morbi finibus, lorem id placerat ullamcorper, nunc enim ultrices massa, id dignissim metus urna eget purus.
                        </div> --}}
                    </div>

                    <div class="chat-message-left pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:42 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            Sed pulvinar, massa vitae interdum pulvinar, risus lectus porttitor magna, vitae commodo lectus mauris et velit.
                            Proin ultricies placerat imperdiet. Morbi varius quam ac venenatis tempus.
                        </div> --}}
                    </div>

                    <div class="chat-message-right mb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:43 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                            <div class="font-weight-bold mb-1">You</div>
                            Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                        </div> --}}
                    </div>

                    <div class="chat-message-left pb-4">
                        {{-- <div>
                            <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
                            <div class="text-muted small text-nowrap mt-2">2:44 am</div>
                        </div>
                        <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                            <div class="font-weight-bold mb-1">Sharon Lessman</div>
                            Sit meis deleniti eu, pri vidit meliore docendi ut, an eum erat animal commodo.
                        </div> --}}
                    </div>

                </div>
            </div>

            <div class="flex-grow-0 py-3 px-4 border-top">
                <div class="input-group">
                    <input id="input-text-chat" type="text" class="form-control" placeholder="Escreva uma Mensagem">
                    <button class="btn btn-primary">Enviar</button>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    const chatconnection = new RTCMultiConnection();
    chatconnection.socketURL = 'https://rtcmulticonnection.herokuapp.com:443/';
    
    chatconnection.session = {
        data: true
    };

    chatconnection.onmessage = function(event) {
        var chatMessge = event.userid;
        var senderFullName = event.extra.fullName;

        var div = document.createElement('div');
        div.innerHTML = event.data;
        document.body.insertBefore(div, document.body.firstChild)
    };

    document.getElementById('input-text-chat').onkeyup = function(e) {
        if (e.keyCode) return;
        this.value = this.value.replace(/^\s+|\s+$/g, '');
        if (!this.value.length) return;

        chatconnection.send(this.value);
        appendDIV(this.value);
        this.value = '';
        console.log(value);
    }

    var chatContainer = document.querySelector('.chat-output');

    function appendDIV(event) {
        var div = document.createElement('div');
        div.innerHTML = event.data || event;
        chatContainer.insertBefore(div, chatContainer.firstChild);
        div.tabIndex = 0;
        div.focus();

        document.getElementById('input-text-chat').focus();
    }

    chatconnection.onopen = function(event) {
        chatconnection.send('hello everyone');
    };

    chatconnection.onmessage = function(event) {
        alert(event.userid + ' said: ' + event.data);
    };

    chatconnection.onmessage = appendDIV;

</script>
